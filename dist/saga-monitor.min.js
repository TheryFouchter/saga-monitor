/**
 * Copyright (c) 2019, Travis Clarke
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.SagaMonitor={})}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}function f(){return"undefined"!=typeof performance&&performance.now?performance.now():Date.now()}function a(e){var t=f();Object.assign(e,{end:t,duration:t-e.start})}function i(e,t){var n=S.get(e);h(t)?t.toPromise().then(function(n){t.isCancelled()?s(e):i(e,n)},function(t){return u(e,t)}):(a(n),n.status=y,n.result=t,I(n.effect)&&l(e,t))}function u(e,t){var n=S.get(e);a(n),n.status=b,n.error=t,I(n.effect)&&l(e,t)}function s(e){var t=S.get(e);a(t),t.status=O}function l(e,t){var n=Object.keys(t)[0],o=!0,r=!1,c=void 0;try{for(var f,a=S.getChildIds(e)[Symbol.iterator]();!(o=(f=a.next()).done);o=!0){var i=f.value,u=S.get(i);u.label===n&&(u.winner=!0)}}catch(e){r=!0,c=e}finally{try{o||null==a.return||a.return()}finally{if(r)throw c}}}function d(){function e(e){E&&console[p]("%c Root saga started:",T,e.saga.name||"anonymous",e.args),S.setRootEffect(e.effectId,Object.assign({},e,{status:v,start:f()}))}function t(e){h&&console[p]("%c effectTriggered:",T,e),S.set(e.effectId,Object.assign({},e,{status:v,start:f()}))}function n(e,t){C&&console[p]("%c effectResolved:",T,e,t),i(e,t)}
function o(e,t){y&&console[p]("%c effectRejected:",T,e,t),u(e,t)}function r(e){b&&console[p]("%c effectCancelled:",T,e),s(e)}function a(e){O&&console[p]("%c actionDispatched:",T,e)}var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=c({},j,l),p=d.level,g=d.color,E=d.rootSagaStart,h=d.effectTrigger,C=d.effectResolve,y=d.effectReject,b=d.effectCancel,O=d.actionDispatch,T=["color: ".concat(g),"font-weight: bold"].join(";");return{rootSagaStarted:e,effectTriggered:t,effectResolved:n,effectRejected:o,effectCancelled:r,actionDispatched:a}}var p=function(e){return"@@redux-saga/"+e},g=p("IO"),E=p("TASK"),h=(Array,function(e){return e&&e[E]}),C=function(e){return e&&e[g]},v="PENDING",y="RESOLVED",b="REJECTED",O="CANCELLED",T=("undefined"!=typeof window&&window,"undefined"!=typeof navigator&&navigator,"CALL"),L=Object.freeze({TAKE:"TAKE",PUT:"PUT",ALL:"ALL",RACE:"RACE",CALL:T,CPS:"CPS",FORK:"FORK",JOIN:"JOIN",CANCEL:"CANCEL",SELECT:"SELECT",ACTION_CHANNEL:"ACTION_CHANNEL",CANCELLED:"CANCELLED",FLUSH:"FLUSH",GET_CONTEXT:"GET_CONTEXT",SET_CONTEXT:"SET_CONTEXT"}),I=function(e){return C(e)&&e.type===L.RACE},A=function(){function e(){t(this,e),this.rootIds=[],this.map={},this.childIdsMap={}}return o(e,[{key:"get",value:function(e){return this.map[e]}},{key:"set",value:function(e,t){this.map[e]=t,null==this.childIdsMap[t.parentEffectId]&&(this.childIdsMap[t.parentEffectId]=[]),this.childIdsMap[t.parentEffectId].push(e)}},{key:"setRootEffect",value:function(e,t){this.rootIds.push(e),this.set(e,Object.assign({root:!0},t))}},{key:"getRootIds",value:function(){return this.rootIds}},{key:"getChildIds",value:function(e){return this.childIdsMap[e]||[]}}]),e}(),S=new A,j={level:"debug",color:"#03A9F4",verbose:!0,rootSagaStart:!1,effectTrigger:!1,effectResolve:!1,effectReject:!1,effectCancel:!1,actionDispatch:!1};e.default=d,Object.defineProperty(e,"__esModule",{value:!0})});