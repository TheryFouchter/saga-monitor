/**
 * Copyright (c) 2018, Travis Clarke
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("redux-saga/utils")):"function"==typeof define&&define.amd?define(["exports","redux-saga/utils"],t):t(e.SagaMonitor={},e.ReduxSaga.utils)}(this,function(e,t){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){return a(e)||r(e)||c()}function a(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}}function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(){return"undefined"!=typeof performance&&performance.now?performance.now():Date.now()}function l(){function e(e){p&&console[l]("%c effectTriggered   ",b,e),M[e.effectId]=Object.assign({},e,{status:O,start:f()}),e.root&&P.push(e.effectId)}function t(e,t){m&&console[l]("%c effectResolved    ",b,e,t),s(e,t)}function o(e,t){y&&console[l]("%c effectRejected    ",b,e,t),u(e,t)}function n(e){v&&console[l]("%c effectCancelled   ",b,e),d(e)}function a(e){h&&console[l]("%c actionDispatched  ",b,e)}var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=Object.assign({},F,r),l=c.level,i=c.verbose,g=c.color,p=c.effectTrigger,m=c.effectResolve,y=c.effectReject,v=c.effectCancel,h=c.actionDispatch,b=["color: ".concat(g),"font-weight: bold"].join(";");return i&&console[l]("View Sagas by executing %c $$LogSagas()",b,"in the console"),{effectTriggered:e,effectResolved:t,effectRejected:o,effectCancelled:n,actionDispatched:a}}function i(e){var t=f();Object.assign(e,{end:t,duration:t-e.start})}function s(e,o){var n=M[e];t.is.task(o)?o.done.then(function(t){o.isCancelled()?d(e):s(e,t)},function(t){return u(e,t)}):(i(n),n.status=R,n.result=o,n&&t.asEffect.race(n.effect)&&g(e,o))}function u(e,o){
var n=M[e];i(n),n.status=A,n.error=o,n&&t.asEffect.race(n.effect)&&g(e,o)}function d(e){var t=M[e];i(t),t.status=k}function g(e,t){for(var o=Object.keys(t)[0],n=p(e),a=0;a<n.length;a++){var r=M[n[a]];r.label===o&&(r.winner=!0)}}function p(e){return Object.keys(M).filter(function(t){return M[t].parentEffectId===e}).map(function(e){return+e})}function m(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];if(console.group){var n;(n=console).group.apply(n,t)}else{var a;console.log(""),(a=console).log.apply(a,[_+J].concat(t)),_+=G}}function y(){console.groupEnd?console.groupEnd():_=_.substr(0,_.length-G.length)}function v(e){e.forEach(h)}function h(e){var t=M[e],o=p(e);if(o.length){m.apply(void 0,n(E(t).formatter.getLog())),o.forEach(h),y()}else b(t)}function b(e){var t,o=E(e),a=o.method,r=o.formatter;(t=console)[a].apply(t,n(r.getLog()))}function E(e){var o,n;return e.root?(o=e.effect,n=w("run",e),n.formatter.addCall(o.saga.name,o.args),S(e,n.formatter)):(o=t.asEffect.take(e.effect))?(n=w("take",e),n.formatter.addValue(o),S(e,n.formatter)):(o=t.asEffect.put(e.effect))?(n=w("put",e),S(Object.assign({},e,{result:o}),n.formatter)):(o=t.asEffect.call(e.effect))?(n=w("call",e),n.formatter.addCall(o.fn.name,o.args),S(e,n.formatter)):(o=t.asEffect.cps(e.effect))?(n=w("cps",e),n.formatter.addCall(o.fn.name,o.args),S(e,n.formatter)):(o=t.asEffect.fork(e.effect))?(n=o.detached?w("spawn",e):w("fork",e),n.formatter.addCall(o.fn.name,o.args),S(e,n.formatter)):(o=t.asEffect.join(e.effect))?(n=w("join",e),S(e,n.formatter)):(o=t.asEffect.race(e.effect))?(n=w("race",e),S(e,n.formatter,!0)):(o=t.asEffect.cancel(e.effect))?(n=w("cancel",e),n.formatter.appendData(o.name)):(o=t.asEffect.select(e.effect))?(n=w("select",e),n.formatter.addCall(o.selector.name,o.args),S(e,n.formatter)):t.is.array(e.effect)?(n=w("parallel",e),S(e,n.formatter,!0)):t.is.iterator(e.effect)?(n=w("",e),n.formatter.addValue(e.effect.name),S(e,n.formatter,!0)):(n=w("unkown",e),S(e,n.formatter)),n}function w(e,t){
var o=t.status===k,n=t.status===A,a=n?"error":"log",r=t&&t.winner?n?"✘":"✓":"",c=function(e){return o?N:n?L:e},f=C();return r&&f.add("%c ".concat(r),c(x)),t&&t.label&&f.add("%c ".concat(t.label,": "),c(x)),e&&f.add("%c ".concat(e," "),c(I)),f.add("%c",c(V)),{method:a,formatter:f}}function j(e){return"function"==typeof e?"".concat(e.name):"string"==typeof e?"'".concat(e,"'"):e}function S(e,o,n){var a=e.status,r=e.result,c=e.error,f=e.duration;a!==R||n?a===A?o.appendData("→ ⚠",c):a===O?o.appendData("⌛"):a===k&&o.appendData("→ Cancelled!"):t.is.array(r)?(o.addValue(" → "),o.addValue(r)):o.appendData("→",r),a!==O&&o.appendData("(".concat(f.toFixed(2),"ms)"))}function D(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"===o(e)||null===e||void 0===e}function C(){function e(e){for(var t=arguments.length,o=Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];if(!T&&"string"==typeof e){var a=e;e=e.replace(/^%c\s*/,""),e!==a&&o.shift()}r.push({msg:e,args:o})}function t(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];c=c.concat(t)}function o(t){D(t)?e(t):T?e("%O",t):e("%s",require("util").inspect(t))}function n(t,n){n.length?(e(t),e("("),n.forEach(function(e,t){o(j(e)),o(t===n.length-1?")":", ")})):e("".concat(t,"()"))}function a(){for(var e=[],t=[],o=0;o<r.length;o++)e.push(r[o].msg),t=t.concat(r[o].args);return[e.join("")].concat(t).concat(c)}var r=[],c=[];return{add:e,addValue:o,addCall:n,appendData:t,getLog:a}}var O="PENDING",R="RESOLVED",A="REJECTED",k="CANCELLED",V="color: darkgrey",x="font-weight: bold",I="color: lightblue",L="color: red",N="color: #ccc",T="undefined"!=typeof window&&window.document,$="undefined"!=typeof navigator&&"ReactNative"===navigator.product,q=T?window:$?global:null,F={level:"debug",verbose:!0,color:"#03A9F4",effectTrigger:!1,effectResolve:!1,effectReject:!1,effectCancel:!1,actionDispatch:!1},M={},P=[],_="",G="   ",J="▼",z=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];t.length||(t=P),
P.length||console.log(_,"No effects to log"),console.log(""),console.log("Saga monitor:",Date.now(),(new Date).toISOString()),v(t),console.log("")};l.VERSION="1.0.10",z.VERSION="1.0.10",q&&(q.$$LogSagas=z),e.logSaga=z,e.default=l,Object.defineProperty(e,"__esModule",{value:!0})});